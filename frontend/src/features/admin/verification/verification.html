<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prescription Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .status-filter-btn.active {
      box-shadow: 0 0 0 1px white, 0 0 0 2px currentColor;
    }
            .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .icon-container {
            transition: transform 0.3s ease;
        }
        .card-hover:hover .icon-container {
            transform: scale(1.1);
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Sidebar (will be injected) -->
  <div id="sidebar"></div>

  <!-- Main -->
  <main class="ml-64 p-6">
    <div class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl font-bold">Prescription Verification</h1>
        <p class="text-gray-600">Review and verify uploaded prescriptions.</p>
      </div>
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500">Filter by status:</span>
        <div id="statusFilters" class="flex space-x-1 gap-x-2">
          <button data-status="all" class="status-filter-btn px-3 py-1 bg-blue-600 text-white rounded-md text-sm active">All</button>
          <button data-status="pending" class="status-filter-btn px-3 py-1 bg-yellow-500 text-white rounded-md text-sm">Pending</button>
          <button data-status="approved" class="status-filter-btn px-3 py-1 bg-green-600 text-white rounded-md text-sm">Approved</button>
          <button data-status="rejected" class="status-filter-btn px-3 py-1 bg-red-600 text-white rounded-md text-sm">Rejected</button>
        </div>
      </div>
    </div>

    <!-- Stats Overview -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Total Prescriptions Card -->
      <div class="bg-white p-6 rounded-xl shadow-md card-hover">
          <div class="flex items-center justify-between">
              <div>
                  <p class="text-gray-500 text-lg">Total Prescriptions</p>
                  <p id="totalCount" class="text-3xl font-bold text-gray-800">0</p>
              </div>
              <div class="bg-blue-100 p-4 rounded-full icon-container">
                  <i class="fas fa-file-medical text-blue-600 text-2xl"></i>
              </div>
          </div>
          <div class="mt-4 flex items-center text-sm text-blue-600">
              <i class="fas fa-chart-line mr-1"></i>
              <span>View all prescriptions</span>
          </div>
      </div>

      <!-- Pending Card -->
      <div class="bg-white p-6 rounded-xl shadow-md card-hover">
          <div class="flex items-center justify-between">
              <div>
                  <p class="text-gray-500 text-lg">Pending</p>
                  <p id="pendingCount" class="text-3xl font-bold text-gray-800">0</p>
              </div>
              <div class="bg-yellow-100 p-4 rounded-full icon-container pulse">
                  <i class="fas fa-hourglass-half text-yellow-600 text-2xl"></i>
              </div>
          </div>
          <div class="mt-4 flex items-center text-sm text-yellow-600">
              <i class="fas fa-exclamation-circle mr-1"></i>
              <span>Requires attention</span>
          </div>
      </div>

      <!-- Approved Card -->
      <div class="bg-white p-6 rounded-xl shadow-md card-hover">
          <div class="flex items-center justify-between">
              <div>
                  <p class="text-gray-500 text-lg">Approved</p>
                  <p id="approvedCount" class="text-3xl font-bold text-gray-800">0</p>
              </div>
              <div class="bg-green-100 p-4 rounded-full icon-container">
                  <i class="fas fa-check-double text-green-600 text-2xl"></i>
              </div>
          </div>
          <div class="mt-4 flex items-center text-sm text-green-600">
              <i class="fas fa-thumbs-up mr-1"></i>
              <span>Ready for fulfillment</span>
          </div>
      </div>

      <!-- Rejected Card -->
      <div class="bg-white p-6 rounded-xl shadow-md card-hover">
          <div class="flex items-center justify-between">
              <div>
                  <p class="text-gray-500 text-lg">Rejected</p>
                  <p id="rejectedCount" class="text-3xl font-bold text-gray-800">0</p>
              </div>
              <div class="bg-red-100 p-4 rounded-full icon-container">
                  <i class="fas fa-ban text-red-600 text-2xl"></i>
              </div>
          </div>
          <div class="mt-4 flex items-center text-sm text-red-600">
              <i class="fas fa-undo-alt mr-1"></i>
              <span>Needs review</span>
          </div>
      </div>
  </div>

    <!-- Controls: Search + Category + Date + Reset -->
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center space-x-3">
        <div class="flex items-center bg-white rounded-md border px-3 py-2 shadow-sm w-64">
          <i class="fas fa-search text-gray-400 mr-2"></i>
          <input id="searchInput" type="text" placeholder="Search prescriptions..."
                 class="flex-1 outline-none text-gray-700" />
          <button id="searchClearBtn" class="ml-2 text-gray-400 hover:text-gray-600" title="Clear">âœ•</button>
        </div>
        
        <select id="customerFilter" class="px-3 py-2 border rounded-md shadow-sm w-48">
          <option value="">All customers</option>
        </select>
        
        <input type="date" id="dateFilter" class="px-3 py-2 border rounded-md shadow-sm">
      </div>
      
      <div>
        <button id="resetBtn" class="px-3 py-2 bg-gray-200 rounded-md hover:bg-gray-300">
          <i class="fas fa-redo-alt mr-1"></i> Reset
        </button>
      </div>
    </div>

    <!-- Table -->
    <div class="bg-white p-4 rounded-lg shadow">
      <table class="w-full border-collapse">
        <thead class="bg-blue-300">
          <tr>
            <th class="text-left px-4 py-2 border text-lg">Prescription ID</th>
            <th class="text-left px-4 py-2 border">Customer</th>
            <th class="text-left px-4 py-2 border">Medicine ID</th>
            <th class="text-left px-4 py-2 border">Upload Date</th>
            <th class="text-left px-4 py-2 border">Status</th>
            <th class="text-center px-4 py-2 border">Actions</th>
          </tr>
        </thead>
        <tbody id="verificationTable" class="text-lg"></tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-center gap-4 mt-4">
      <button id="prevPage" class="px-3 py-1 bg-gray-200 rounded-md hover:bg-gray-300">Prev</button>
      <span id="pageInfo" class="text-gray-600"></span>
      <button id="nextPage" class="px-3 py-1 bg-gray-200 rounded-md hover:bg-gray-300">Next</button>
    </div>
  </main>

  <!-- Modal (hidden by default) -->
  <div id="prescriptionModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60">
    <div id="prescriptionModalBox" class="relative bg-white rounded-lg shadow-lg max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto">
      <!-- X Close -->
      <button id="modalClose" class="absolute top-3 right-3 text-2xl text-gray-600 hover:text-red-600 z-10">&times;</button>

      <div class="p-6">
        <h2 class="text-xl font-bold mb-4">Prescription Verification</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <!-- Customer Information -->
          <div class="bg-gray-50 p-4 rounded-md">
            <h3 class="font-semibold mb-2 text-blue-700"><i class="fas fa-user mr-2"></i>Customer Information</h3>
            <div id="customerInfo" class="text-m">
              <p><span class="font-medium">Name:</span> <span id="customerName">-</span></p>
              <p><span class="font-medium">Email:</span> <span id="customerEmail">-</span></p>
              <p><span class="font-medium">Phone:</span> <span id="customerPhone">-</span></p>
              <p><span class="font-medium">Address:</span> <span id="customerAddress">-</span></p>
            </div>
          </div>
          
          <!-- Order Information -->
          <div class="bg-gray-50 p-4 rounded-md">
            <h3 class="font-semibold mb-2 text-blue-700"><i class="fas fa-shopping-cart mr-2"></i>Order Information</h3>
            <div id="orderInfo" class="text-m">
              <p><span class="font-medium">Medicine Id:</span> <span id="orderId">-</span></p>
              <p><span class="font-medium">Medicine NAme:</span> <span id="orderDate">-</span></p>
              <p><span class="font-medium">Composition:</span> <span id="orderAmount">-</span></p>
              <p><span class="font-medium">Description:</span> <span id="orderItems">-</span></p>
            </div>
          </div>
        </div>
        
        <!-- Image area -->
        <div class="mb-6">
          <h3 class="font-semibold mb-2 text-blue-700"><i class="fas fa-file-image mr-2"></i>Prescription Image</h3>
          <div class="border rounded-md p-2 bg-gray-50 flex justify-center">
            <img id="prescriptionImage" src="" alt="Prescription" class="max-w-full max-h-[50vh] object-contain rounded-md" />
          </div>
        </div>
        
        <!-- Verification Notes (for rejection) -->
        <div id="rejectionSection" class="mb-6 hidden">
          <h3 class="font-semibold mb-2 text-red-700"><i class="fas fa-exclamation-circle mr-2"></i>Rejection Reason</h3>
          <select id="rejectionReason" class="w-full p-2 border rounded-md mb-2">
            <option value="">Select a reason</option>
            <option value="Illegible prescription">Illegible prescription</option>
            <option value="Expired prescription">Expired prescription</option>
            <option value="Missing information">Missing information</option>
            <option value="Prescription doesn't match order">Prescription doesn't match order</option>
            <option value="Other">Other (specify in notes)</option>
          </select>
          <textarea id="verificationNotes" class="w-full p-2 border rounded-md" rows="3" placeholder="Add detailed verification notes..."></textarea>
        </div>
        
        <!-- Verification History -->
        <div id="verificationHistory" class="mb-6 hidden">
          <h3 class="font-semibold mb-2 text-green-700"><i class="fas fa-history mr-2"></i>Verification History</h3>
          <div class="text-sm bg-gray-50 p-3 rounded-md">
            <p><span class="font-medium">Verified by:</span> <span id="verifiedBy">-</span></p>
            <p><span class="font-medium">Verified on:</span> <span id="verifiedOn">-</span></p>
            <p><span class="font-medium">Notes:</span> <span id="historyNotes">-</span></p>
          </div>
        </div>

        <!-- Buttons -->
        <div class="flex justify-between items-center">
          <div class="flex gap-3">
            <button id="modalApprove" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
              <i class="fas fa-check mr-1"></i> Approve
            </button>
            <button id="modalReject" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
              <i class="fas fa-times mr-1"></i> Reject
            </button>
          </div>
          <button id="confirmAction" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 hidden">
            Confirm
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast (top-right) -->
  <div id="toast" class="fixed top-6 right-6 bg-gray-800 text-white px-4 py-2 rounded shadow opacity-0 transform translate-y-2 transition-all duration-300 z-50"></div>

  <!-- script -->
  <script src="verification.js" defer></script>
</body>
</html>